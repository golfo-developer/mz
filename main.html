<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <title>–¶–ì–ë-–ù ‚Äî –ì–ª–∞–≤–Ω–∞—è</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet" />
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background: #f2f3f5;
            margin: 0;
            padding: 0;
        }

        .main-container {
            max-width: 800px;
            margin: 50px auto;
            background: #fff;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        h1, h2 {
            text-align: center;
            color: #2c3e50;
        }

        label {
            font-weight: bold;
            margin-top: 15px;
            display: block;
        }

        input, button, textarea {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            margin-bottom: 15px;
            border-radius: 5px;
            border: 1px solid #ccc;
            font-size: 16px;
            box-sizing: border-box;
        }

        button {
            background-color: #3b7ddd;
            color: white;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background-color: #315fc4;
        }

        #result {
            white-space: pre-line;
            background: #f9f9f9;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .user-info {
            margin-bottom: 30px;
        }

        .user-info p {
            font-size: 18px;
            color: #2d3436;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <h1>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–∏–∫–∞–∑–æ–≤ –¶–ì–ë-–ù</h1>

        <div class="user-info">
            <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <span id="user-name">...</span></p>

            <label for="user-position">–í–∞—à–∞ –¥–æ–ª–∂–Ω–æ—Å—Ç—å:</label>
            <input type="text" id="user-position" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ó–∞–≤–µ–¥—É—é—â–∏–π –æ—Ç–¥–µ–ª–µ–Ω–∏–µ–º" />

            <label for="user-signature">–í–∞—à–∞ –ø–æ–¥–ø–∏—Å—å (–§–ò–û –ø–æ–ª–Ω–æ—Å—Ç—å—é):</label>
            <input type="text" id="user-signature" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á" />
        </div>

        <div class="order-form">
            <h2>üìú –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–∫–∞–∑–∞</h2>

            <label for="new-employee">–§–ò–û –Ω–æ–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞:</label>
            <input type="text" id="new-employee" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á" />

            <label for="employee-position">–î–æ–ª–∂–Ω–æ—Å—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞:</label>
            <input type="text" id="employee-position" placeholder="–§–µ–ª—å–¥—à–µ—Ä" />

            <label for="accept-date">–î–∞—Ç–∞ –ø—Ä–∏–Ω—è—Ç–∏—è:</label>
            <input type="date" id="accept-date" />

            <button onclick="generateAcceptOrder()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–∫–∞–∑</button>

            <div id="result"></div>

            <button onclick="copyToClipboard()">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç –ø—Ä–∏–∫–∞–∑–∞</button>
        </div>
    </div>

    <script>
        // –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ localStorage
        window.onload = function() {
            const userName = localStorage.getItem("userName");
            if (!userName) {
                alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ VK.");
                window.location.href = "login.html";
                return;
            }
            document.getElementById("user-name").textContent = userName;
        };

        function generateAcceptOrder() {
            const userName = localStorage.getItem("userName") || "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å";
            const userPosition = document.getElementById("user-position").value || "‚Äî";
            const userSignature = document.getElementById("user-signature").value || "‚Äî";

            const newEmployee = document.getElementById("new-employee").value;
            const position = document.getElementById("employee-position").value;
            const dateInput = document.getElementById("accept-date").value;
            const date = dateInput ? new Date(dateInput).toLocaleDateString('ru-RU') : new Date().toLocaleDateString('ru-RU');

            if (!newEmployee || !position) {
                alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –§–ò–û –∏ –¥–æ–ª–∂–Ω–æ—Å—Ç—å –Ω–æ–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞.");
                return;
            }

            const orderText = `[–¶–ì–ë-–ù] –ü—Ä–∏–∫–∞–∑ –æ –ø—Ä–∏–Ω—è—Ç–∏–∏ #${Math.floor(Math.random() * 9000) + 1000}\n\n` +
                `–ù–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ –∑–∞—è–≤–ª–µ–Ω–∏—è –∏ —Ç—Ä—É–¥–æ–≤–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞\n` +
                `–ü–†–ò–ù–ò–ú–ê–Æ:\n` +
                `${newEmployee} –Ω–∞ –¥–æ–ª–∂–Ω–æ—Å—Ç—å ${position}\n` +
                `–î–∞—Ç–∞ –≤—Å—Ç—É–ø–ª–µ–Ω–∏—è –≤ –¥–æ–ª–∂–Ω–æ—Å—Ç—å: ${date}\n\n` +
                `–ü–æ–¥–ø–∏—Å–∞–Ω–æ: ${userSignature}\n` +
                `–î–æ–ª–∂–Ω–æ—Å—Ç—å –ø–æ–¥–ø–∏—Å–∞–Ω—Ç–∞: ${userPosition}`;

            document.getElementById("result").textContent = orderText;
        }

        function copyToClipboard() {
            const text = document.getElementById("result").textContent;
            if (!text) {
                alert("–°–Ω–∞—á–∞–ª–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –ø—Ä–∏–∫–∞–∑.");
                return;
            }
            navigator.clipboard.writeText(text);
            alert("–ü—Ä–∏–∫–∞–∑ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!");
        }
    </script>
</body>
</html>
