<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è VK</title>
</head>
<body>
  <h1>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ VK</h1>
  <p id="status">–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</p>

  <script>
    const hash = window.location.hash;
    if (hash.includes("access_token")) {
      const params = new URLSearchParams(hash.substring(1));
      const token = params.get("access_token");
      const userId = params.get("user_id");

      document.getElementById("status").innerText = `–í—ã –≤–æ—à–ª–∏ –∫–∞–∫ VK ID: ${userId}`;

      // üíæ –ú–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ localStorage –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
      localStorage.setItem("vk_token", token);
      localStorage.setItem("vk_user_id", userId);

      // üîÅ –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –≥–ª–∞–≤–Ω—É—é –∏–ª–∏ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
      setTimeout(() => {
        window.location.href = "/dashboard.html";
      }, 2000);
    } else {
      document.getElementById("status").innerText = "–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏";
    }
  </script>
</body>
</html>
